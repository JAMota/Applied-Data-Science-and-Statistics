var cacheStatusValues=[];cacheStatusValues[0]="uncached";cacheStatusValues[1]="idle";cacheStatusValues[2]="checking";cacheStatusValues[3]="downloading";cacheStatusValues[4]="updateready";cacheStatusValues[5]="obsolete";function logEvent(f){var b,a,c,d;b=(navigator.onLine)?"yes":"no";a=cacheStatusValues[cache.status];c=f.type;d="online: "+b;d+=", event: "+c;d+=", status: "+a;if(c=="error"&&navigator.onLine){d+=" (prolly a syntax error in manifest)"}console.log(d)}function logOfflineRequest(f){var b,a,c,d;b=(navigator.onLine)?"yes":"no";a=cacheStatusValues[cache.status];c=f.type;if((b=="no")&&(c=="checking")&&(a=="idle")){addThisRequest2Cookie();console.log("wits:recorded in cookie")}else{if((b=="yes")&&(c=="noupdate")){addThisRequest2Cookie();UpdateOfflineRequests()}}}if(window.applicationCache){var cache=window.applicationCache;cache.addEventListener("checking",logOfflineRequest,false);cache.addEventListener("error",logEvent,false);cache.addEventListener("noupdate",logOfflineRequest,false)}function addThisRequest2Cookie(){if(ReadCookie("offline")==""){if(_IP==""){if(ReadCookie("clientIP")==""){_IP="1.1.1.1"}else{_IP=ReadCookie("clientIP")}}SetCookie("offline",_IP+"`"+_offlineURL)}else{SetCookie("offline",ReadCookie("offline")+"|"+_offlineURL)}}function setClientIPCookie(a){if(a!=""){SetCookie("clientIP",a)}}function UpdateOfflineRequests(){if(ReadCookie("offline")!=""){if(Svrpath==""){Svrpath="https://wits.worldbank.org/"}var a=ReadCookie("offline");$.ajax({type:"POST",url:Svrpath+"Country-Summary.aspx/UpdateOfflineData",contentType:"application/json; charset=utf-8",data:"{Offlinedata:'"+a+"'}",dataType:"json",success:function(b){deletecookie("offline");console.log("wits:deleting the cookie")},error:function(b,d,c){}})}};