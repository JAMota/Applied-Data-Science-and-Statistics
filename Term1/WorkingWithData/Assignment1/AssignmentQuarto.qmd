---
title: "WorkingWithDataAssignment"
author: "João Mota"
format:
  pdf:
    toc: true
    number-sections: true
    colorlinks: true
    documentclass: scrartcl
    papersize: a4
    code-fold: true
    geometry:
      - top=30mm
      - left=15mm
      - right = 15mm
      - heightrounded
    editor_options:
      markdown:
        wrap: 72

editor: visual
---


/*   
A few hours of trial and errors can save you a few minutes of reading the proper documentation :) 
 https://quarto.org/docs/output-formats/pdf-basics.html   
Go to terminal tab down there and type quarto install tool tinytex   
NOTE TO SELF!!!! using quarto is the same as playing restart Rstudio simulator 2022 because nothing is properly recached and they have a worse garbage collecter than assembly so if you still get the
same error after changing the just restart rstudio and remember to never ever ever change the
 initial format or add anything close to it because it will break the pdf and start generating html
also please be smart and read https://quarto.org/docs/reference/formats/pdf.html for the formating  
*/

```{r}
library(haven)
library(tidyverse)
library(dplyr)
library(geometry) 
#install.packages('hyperref')
library(formatR)
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## Very important documentation for the 2018 data set //it is a surprise toll that will help us later
technicalAnnex2018 = 'https://doc.ukdataservice.ac.uk/doc/8406/mrdoc/pdf/8406_cyber_security_breaches_survey_2018_technical_annex.pdf'

## this is the loading the first year of this level of survey data set
## after burning my entire brain, replacing it with the backup one and also burning that one I discovered that it is just these lines that aren't being formatted in pdf because they are absolutely huge but at least it works for the other ones #FicaADica
## I assume it was thanks to formatR ?? I won't bother to redo every single bloody step again, enough pain and stack for the day
dataCyberSecuritySurvey2018 = read_spss('C:/AppliedDataScienceAndStatistics/Applied-Data-Science-and-Statistics/Term1/WorkingWithData/Assignment1/Cyber Security Breaches Survey, 2018/UKDA-8406-spss-CyberSurvey2018/spss/spss24/17-054294-01_csbs_2018_final_data_deidentified_v1_12042018_public.sav')

## adding the variable year because none of the data sets have any proper way to distinguish between the years of each survey
dataCyberSecuritySurvey2018$year = '2018'
```

## Now we do the same for the other years before we merge them

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## loading the second year of this level of survey data set 
dataCyberSecuritySurvey2019 = read_spss('C:/AppliedDataScienceAndStatistics/Applied-Data-Science-and-Statistics/Term1/WorkingWithData/Assignment1/Cyber Security Breaches Survey, 2019/UKDA-8480-spss-CyberSurvey2019/spss/spss24/csbs_2019_raw_data.sav')

## adding the variable year because none of the data sets have any proper way to distinguish between the years of each survey
dataCyberSecuritySurvey2019$year = '2019'
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## loading the third year of this level of survey data set 
dataCyberSecuritySurvey2020 = read_spss('C:/AppliedDataScienceAndStatistics/Applied-Data-Science-and-Statistics/Term1/WorkingWithData/Assignment1/Cyber Security Breaches Survey, 2020/UKDA-8638-spss-CyberSurvey2020/spss/spss25/csbs2020_final_banded_variables_only_180320_public.sav')

## adding the variable year because none of the data sets have any proper way to distinguish between the years of each survey
dataCyberSecuritySurvey2020$year = '2020'
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## loading the forth year of this level of survey data set 
dataCyberSecuritySurvey2021 = read_spss('C:/AppliedDataScienceAndStatistics/Applied-Data-Science-and-Statistics/Term1/WorkingWithData/Assignment1/Cyber Security Breaches Survey, 2020/UKDA-8638-spss-CyberSurvey2020/spss/spss25/csbs2020_final_banded_variables_only_180320_public.sav')

## adding the variable year because none of the data sets have any proper way to distinguish between the years of each survey
dataCyberSecuritySurvey2021$year = '2021'
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## loading the fifth and final year of this level of survey data set 
dataCyberSecuritySurvey2022 = read_spss('C:/AppliedDataScienceAndStatistics/Applied-Data-Science-and-Statistics/Term1/WorkingWithData/Assignment1/Cyber Security Breaches Survey, 2022/UKDA-8970-spss/spss/spss25/dcms_csbs_2022_banded_cost_data_only_v4_public.sav')

## adding the variable year because none of the data sets have any proper way to distinguish between the years of each survey
dataCyberSecuritySurvey2022$year = '2022'
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## Now that we have all data loaded lets start by tidying up data set by data set start from 2018


## for some sweet sweet documentation about the questions starting from page 26
##TODO remove comment
#browseURL(technicalAnnex2018)

```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
## This entire code snippet is tidying up the type of organisation for the 2018 survey
##renaming the bloody variables to a more java like name

dataCyberSecuritySurvey2018TidyName = rename(dataCyberSecuritySurvey2018,isBusiness= 'samptype')

## if isBusiness is 1 it is a business if it is 2 it is a charity
## will change it the 2 to 0 because what is the point of a boolean without boolean values

n = length(dataCyberSecuritySurvey2018TidyName$isBusiness)



for (i in 1:n) {
  if(dataCyberSecuritySurvey2018TidyName$isBusiness[i] == 2){
    dataCyberSecuritySurvey2018TidyName$isBusiness[i] = 0
  }
}

##daily remimder that there is a boolean type but it is called logical
##
##Numeric -	Set of all real numbers
##Integer -	Set of all integers, Z
##Logical - -	TRUE and FALSE
##Complex -	Set of complex numbers
##Character -	“a”, “b”, “c”, …, “ç”, “#”, “~”, …., “1”, “2”, …etc

str(dataCyberSecuritySurvey2018TidyName$isBusiness)
## it is a string so lets make it a proper boolean

  dataCyberSecuritySurvey2018TidyName$isBusiness = as.integer(dataCyberSecuritySurvey2018TidyName$isBusiness)

dataCyberSecuritySurvey2018TidyName$isBusiness = as.logical(dataCyberSecuritySurvey2018TidyName$isBusiness)

## is it in a glorious boolean state where true is business and false is charity

str(dataCyberSecuritySurvey2018TidyName$isBusiness)

## typex is 1-2 for businesses and 3 for charities so redundant and can be removed

dataCyberSecuritySurvey2018TidyName = dataCyberSecuritySurvey2018TidyName %>% select(-typex)


##dataCyberSecuritySurvey2018TidyName
## never forget if R can't show all displayed text from a computation it breaks both the rendering and ##the refreshing of the rendered code for some reason ¯/_(ツ)_/¯
## future edit anything and everything breaks for no reason at all, just kill it and reopen
## refer to the first NOTE TO SELF for more information

```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
technicalAnnex2021 = "https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/977491/20-046099-01_CSBS_2021_quant_technical_annex_v2.4__clean__190321.pdf"
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
technicalAnnex2019 = "https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/950097/Cyber_Security_Breaches_Survey_2019_-_Technical_Annex_V2.pdf"
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
technicalAnnex2020 = "https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/874693/Technical_annex_-_Cyber_Security_Breaches_Survey_2020.pdf"
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
technicalAnnex2022 = "https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1064446/Technical_annex_-_cyber_security_breaches_survey_March_2022__WEB_.pdf"
```

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```
```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r tidy=TRUE, tidy.opts=list(width.cutoff=72)}
1 + 1
```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
